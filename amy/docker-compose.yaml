# ============================================
# AMY (Intel i3-2310M, 16GB RAM) - Utilities & Services
# Version: 85 - Matching bender's Diun/Trivy config, added postgres-backup
# ============================================
# Host: Intel Core i3-2310M, 16GB RAM
# IP: 192.168.21.130
# Config path: /docker/
# ============================================
# v84 CHANGES:
#   - Beszel: Fixed volume mount from /docker/beszel to /docker/beszel/data
# ============================================
# v85 CHANGES:
#   - Trivy: Changed port from 4954:4954 to 8083:8080 (8082 used by filebrowser)
#   - Diun: Split paths to /docker/diun/data and /docker/diun/config (matching bender)
#   - Diun: Updated config to match bender's weekly schedule and ntfy notifications
#   - Added postgres-backup: Daily PostgreSQL backups (matching bender)
#   - Watchtower: Commented out (EOL, replaced by Diun+Trivy+custom script)
#     !! DO NOT REMOVE WATCHTOWER - Keep as fallback !!
# ============================================
# !! IMPORTANT - DO NOT MODIFY PORTS OR TSDPROXY NAMES !!
# These are LOCKED production values. Any changes require explicit approval.
# ============================================

services:

  # ============================================
  # INFRASTRUCTURE
  # ============================================

  # LOCKED tsdproxy.name: "amy-proxy" - DO NOT CHANGE
  # LOCKED PORT: 8085:8080 - DO NOT CHANGE
  tsdproxy:
    image: almeidapaulopt/tsdproxy:latest
    container_name: tsdproxy
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "amy-proxy"
      tsdproxy.container_port: "8080"
    environment:
      - TSDPROXY_AUTHKEY=${TSDPROXY_AUTHKEY}
      - TSDPROXY_HOSTNAME=${AMY_HOST_IP}
      - TSDPROXY_DATADIR=/data
      - DOCKER_HOST=unix:///var/run/docker.sock
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /docker/tsdproxy/data:/data
      - /docker/tsdproxy/config:/config
    ports:
      - "8085:8080"
    networks:
      - utility-network

  # LOCKED tsdproxy.name: "amy-dockwatch" - DO NOT CHANGE
  # LOCKED PORT: 9999:80 - DO NOT CHANGE
  dockwatch:
    image: ghcr.io/notifiarr/dockwatch:main
    container_name: dockwatch
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "amy-dockwatch"
      tsdproxy.container_port: "80"
      tsdproxy.dash.icon: "sh/docker"
    environment:
      - PUID=${PUID}
      - PGID=${PGID}
      - TZ=${TIMEZONE}
    volumes:
      - /docker/dockwatch:/config
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - "9999:80"
    networks:
      - utility-network

  # ============================================
  # DNS & NETWORKING
  # ============================================

  # LOCKED tsdproxy.name: "pihole-amy" - DO NOT CHANGE
  # LOCKED PORT: 53:53, 8053:80 - DO NOT CHANGE
  pihole:
    image: pihole/pihole:latest
    container_name: pihole
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "pihole-amy"
      tsdproxy.container_port: "80"
      tsdproxy.dash.icon: "sh/pi-hole"
    environment:
      - TZ=${TIMEZONE}
      - WEBPASSWORD=${PIHOLE_PASSWORD}
      - PIHOLE_DNS_=9.9.9.9;1.1.1.1
      - DNSSEC=true
      - REV_SERVER=true
      - REV_SERVER_DOMAIN=lan
      - REV_SERVER_TARGET=192.168.21.1
      - REV_SERVER_CIDR=192.168.21.0/24
      - FTLCONF_LOCAL_IPV4=192.168.21.130
    volumes:
      - /docker/pihole/etc-pihole:/etc/pihole
      - /docker/pihole/etc-dnsmasq.d:/etc/dnsmasq.d
    ports:
      - "53:53/tcp"
      - "53:53/udp"
      - "8053:80/tcp"
    networks:
      - utility-network
    cap_add:
      - NET_ADMIN

  # ============================================
  # KEEPALIVED - High Availability VIP
  # ============================================
  # Provides VIP 192.168.21.100 (BACKUP role)
  # bender is MASTER (priority 200), amy is BACKUP (priority 100)
  keepalived:
    image: osixia/keepalived:2.0.20
    container_name: keepalived
    restart: unless-stopped
    cap_add:
      - NET_ADMIN
      - NET_BROADCAST
      - NET_RAW
    network_mode: host
    volumes:
      - /docker/keepalived/keepalived.conf:/container/service/keepalived/assets/keepalived.conf:ro
    command: --copy-service

  # ============================================
  # DATABASES & CACHE
  # ============================================

  # LOCKED PORT: 5432:5432 - DO NOT CHANGE
  postgres:
    image: postgres:17-alpine
    container_name: postgres
    restart: unless-stopped
    labels:
      tsdproxy.enable: "false"
    environment:
      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
      - POSTGRES_USER=postgres
      - POSTGRES_MULTIPLE_DATABASES=atuin,miniflux,sss
    volumes:
      - /docker/postgresql/data:/var/lib/postgresql/data
      - /docker/postgresql/init:/docker-entrypoint-initdb.d
    ports:
      - "5432:5432"
    networks:
      - utility-network
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 10s
      timeout: 5s
      retries: 5

  # ============================================
  # POSTGRES BACKUP - Daily PostgreSQL backups
  # ============================================
  # Added in v85 - Adapted for amy's multi-database setup
  # Note: amy uses POSTGRES_MULTIPLE_DATABASES, so we backup each DB
  #       Bender uses single DB (immich) so it can use POSTGRES_DB=all
  postgres-backup:
    image: prodrigestivill/postgres-backup-local:latest
    container_name: postgres-backup
    restart: unless-stopped
    labels:
      tsdproxy.enable: "false"
    environment:
      - POSTGRES_HOST=postgres
      - POSTGRES_DB=atuin,miniflux,sss
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
      - SCHEDULE=@daily
      - BACKUP_KEEP_DAYS=7
      - BACKUP_KEEP_WEEKS=4
      - BACKUP_KEEP_MONTHS=6
      - HEALTHCHECK_PORT=8080
    volumes:
      - /docker/backups/postgres:/backups
    depends_on:
      postgres:
        condition: service_healthy
    networks:
      - utility-network

  valkey:
    image: valkey/valkey:8-alpine
    container_name: valkey
    restart: unless-stopped
    labels:
      tsdproxy.enable: "false"
    command: valkey-server --appendonly yes
    volumes:
      - /docker/valkey:/data
    ports:
      - "6379:6379"
    networks:
      - utility-network
    healthcheck:
      test: ["CMD", "valkey-cli", "ping"]
      interval: 30s
      timeout: 10s

  # ============================================
  # NOTIFICATIONS
  # ============================================

  # LOCKED tsdproxy.name: "ntfy" - DO NOT CHANGE
  # LOCKED PORT: 8888:80 - DO NOT CHANGE
  ntfy:
    image: binwiederhier/ntfy:latest
    container_name: ntfy
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "ntfy"
      tsdproxy.container_port: "80"
      tsdproxy.dash.icon: "sh/ntfy"
    environment:
      - TZ=${TIMEZONE}
    command: serve
    volumes:
      - /docker/ntfy/cache:/var/cache/ntfy
      - /docker/ntfy/etc:/etc/ntfy
    ports:
      - "8888:80"
    networks:
      - utility-network

  # ============================================
  # PRODUCTIVITY
  # ============================================

  # LOCKED tsdproxy.name: "pdf" - DO NOT CHANGE
  # LOCKED PORT: 8080:8080 - DO NOT CHANGE
  stirling-pdf:
    image: frooodle/s-pdf:latest
    container_name: stirling-pdf
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "pdf"
      tsdproxy.container_port: "8080"
      tsdproxy.dash.icon: "sh/stirling-pdf"
    environment:
      - TZ=${TIMEZONE}
      - DOCKER_ENABLE_SECURITY=false
    volumes:
      - /docker/stirling-pdf/training:/usr/share/tessdata
      - /docker/stirling-pdf/configs:/configs
    ports:
      - "8080:8080"
    networks:
      - utility-network

  # LOCKED tsdproxy.name: "home" - DO NOT CHANGE
  # LOCKED PORT: 3003:3000 - DO NOT CHANGE
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    container_name: homepage
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "home"
      tsdproxy.container_port: "3000"
      tsdproxy.dash.icon: "mdi/home"
    environment:
      - TZ=${TIMEZONE}
      - PUID=${PUID}
      - PGID=${PGID}
    volumes:
      - /docker/homepage:/app/config
      - /var/run/docker.sock:/var/run/docker.sock:ro
    ports:
      - "3003:3000"
    networks:
      - utility-network

  # LOCKED tsdproxy.name: "atuin" - DO NOT CHANGE
  # LOCKED PORT: 8777:8888 - DO NOT CHANGE
  atuin:
    image: ghcr.io/atuinsh/atuin:latest
    container_name: atuin
    restart: unless-stopped
    command: server start
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "atuin"
      tsdproxy.container_port: "8888"
      tsdproxy.dash.icon: "sh/atuin"
    environment:
      - ATUIN_HOST=0.0.0.0
      - ATUIN_OPEN_REGISTRATION=true
      - ATUIN_DB_URI=postgres://postgres:${POSTGRES_PASSWORD}@postgres:5432/atuin
      - RUST_LOG=warning
    volumes:
      - /docker/atuin:/config
    ports:
      - "8777:8888"
    networks:
      - utility-network
    depends_on:
      - postgres

  # LOCKED tsdproxy.name: "rss" - DO NOT CHANGE
  # LOCKED PORT: 8385:8080 - DO NOT CHANGE
  miniflux:
    image: miniflux/miniflux:latest
    container_name: miniflux
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "rss"
      tsdproxy.container_port: "8080"
      tsdproxy.dash.icon: "sh/miniflux"
    environment:
      - DATABASE_URL=postgres://postgres:${POSTGRES_PASSWORD}@postgres/miniflux?sslmode=disable
      - RUN_MIGRATIONS=1
      - CREATE_ADMIN=1
      - ADMIN_USERNAME=${MINIFLUX_ADMIN_USERNAME}
      - ADMIN_PASSWORD=${MINIFLUX_ADMIN_PASSWORD}
    ports:
      - "8385:8080"
    networks:
      - utility-network
    depends_on:
      postgres:
        condition: service_healthy

  # LOCKED tsdproxy.name: "it-tools" - DO NOT CHANGE
  # LOCKED PORT: 8181:80 - DO NOT CHANGE
  it-tools:
    image: corentinth/it-tools:latest
    container_name: it-tools
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "it-tools"
      tsdproxy.container_port: "80"
      tsdproxy.dash.icon: "sh/it-tools"
    environment:
      - TZ=${TIMEZONE}
    ports:
      - "8181:80"
    networks:
      - utility-network

  # LOCKED tsdproxy.name: "files" - DO NOT CHANGE
  # LOCKED PORT: 8082:80 - DO NOT CHANGE
  filebrowser:
    image: filebrowser/filebrowser:latest
    container_name: filebrowser
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "files"
      tsdproxy.container_port: "80"
      tsdproxy.dash.icon: "sh/filebrowser-quantum"
    environment:
      - TZ=${TIMEZONE}
      - PUID=${PUID}
      - PGID=${PGID}
    volumes:
      - /docker/filebrowser/database.db:/database.db
      - /:/srv
    ports:
      - "8082:80"
    networks:
      - utility-network

  # ============================================
  # WALLOS - Commented out, saved for future use
  # ============================================
  # wallos:
  #   image: bellamy/wallos:latest
  #   container_name: wallos
  #   restart: unless-stopped
  #   labels:
  #     tsdproxy.enable: "true"
  #     tsdproxy.name: "wallos"
  #     tsdproxy.container_port: "80"
  #     tsdproxy.dash.icon: "sh/wallos"
  #   environment:
  #     - TZ=${TIMEZONE}
  #   volumes:
  #     - /docker/wallos:/var/www/html/db
  #   ports:
  #     - "8283:80"
  #   networks:
  #     - utility-network

  # LOCKED tsdproxy.name: "vault" - DO NOT CHANGE
  # LOCKED PORT: 8484:80 - DO NOT CHANGE
  vaultwarden:
    image: vaultwarden/server:latest
    container_name: vaultwarden
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "vault"
      tsdproxy.container_port: "80"
      tsdproxy.dash.icon: "sh/vaultwarden"
    environment:
      - TZ=${TIMEZONE}
      - DOMAIN=https://vault.${TAILSCALE_DOMAIN}
    volumes:
      - /docker/vaultwarden:/data
    ports:
      - "8484:80"
    networks:
      - utility-network

  # LOCKED tsdproxy.name: "mealie" - DO NOT CHANGE
  # LOCKED PORT: 8456:9000 - DO NOT CHANGE
  mealie:
    image: ghcr.io/mealie-recipes/mealie:latest
    container_name: mealie
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "mealie"
      tsdproxy.container_port: "9000"
      tsdproxy.dash.icon: "sh/mealie"
    environment:
      - TZ=${TIMEZONE}
      - ALLOW_SIGNUP=false
      - PUID=${PUID}
      - PGID=${PGID}
      - MAX_WORKERS=1
      - WEB_CONCURRENCY=1
    volumes:
      - /docker/mealie:/app/data
    ports:
      - "8456:9000"
    networks:
      - utility-network

  # LOCKED tsdproxy.name: "argus" - DO NOT CHANGE
  # LOCKED PORT: 8282:8080 - DO NOT CHANGE
  argus:
    image: releaseargus/argus:latest
    container_name: argus
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "argus"
      tsdproxy.container_port: "8080"
      tsdproxy.dash.icon: "sh/release-argus"
    environment:
      - ARGUS_UID=${PUID}
      - ARGUS_GID=${PGID}
    volumes:
      - /docker/argus/config.yml:/app/config.yml
      - /docker/argus:/app/data
    ports:
      - "8282:8080"
    networks:
      - utility-network
    healthcheck:
      test: ["CMD", "/healthcheck", "http://localhost:8080/api/v1/healthcheck"]
      interval: 1m
      timeout: 10s
      retries: 3
      start_period: 10s

  # LOCKED tsdproxy.name: "lube" - DO NOT CHANGE
  # LOCKED PORT: 8989:8080 - DO NOT CHANGE
  lubelogger:
    image: ghcr.io/hargata/lubelogger:latest
    container_name: lubelogger
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "lube"
      tsdproxy.container_port: "8080"
      tsdproxy.dash.icon: "sh/lubelogger"
    environment:
      - TZ=${TIMEZONE}
      - PUID=${PUID}
      - PGID=${PGID}
      - LC_ALL=en_US.UTF-8
      - LANG=en_US.UTF-8
    volumes:
      - /docker/lubelogger/config:/App/config
      - /docker/lubelogger/data:/App/data
      - /docker/lubelogger/documents:/App/wwwroot/documents
      - /docker/lubelogger/images:/App/wwwroot/images
      - /docker/lubelogger/temp:/App/wwwroot/temp
      - /docker/lubelogger/log:/App/log
      - /docker/lubelogger/keys:/root/.aspnet/DataProtection-Keys
    ports:
      - "8989:8080"
    networks:
      - utility-network

  # LOCKED tsdproxy.name: "money" - DO NOT CHANGE
  # LOCKED PORT: 9021:9001 - DO NOT CHANGE
  spendspentspent:
    image: gonzague/spendspentspent
    container_name: spendspentspent
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "money"
      tsdproxy.container_port: "9001"
      tsdproxy.dash.icon: "mdi/cash-multiple"
    ports:
      - "9021:9001"
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /docker/spendspentspent/app-files:/app-files
      - /docker/spendspentspent/files:/files
    environment:
      - SALT=${SSS_SALT}
      - DB_PATH=jdbc:postgresql://postgres:5432/sss
      - DB_USER=postgres
      - DB_PASSWORD=${POSTGRES_PASSWORD}
      - TIMEZONE=America/Toronto
      - ALLOW_SIGNUP=0
    networks:
      - utility-network
    depends_on:
      - postgres

  # LOCKED tsdproxy.name: "limdius" - DO NOT CHANGE
  # LOCKED PORT: 5050:5050 - DO NOT CHANGE
  limdius:
    image: python:3.11-slim
    container_name: limdius
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "limdius"
      tsdproxy.container_port: "5050"
      tsdproxy.dash.icon: "mdi/car-multiple"
    environment:
      - TZ=${TIMEZONE}
      - PLAYWRIGHT_DRIVER_URL=ws://playwright-chrome:3000
    volumes:
      - /docker/limdius:/app
    working_dir: /app
    ports:
      - "5050:5050"
    networks:
      - utility-network
    command: >
      sh -c "pip install --no-cache-dir requests flask playwright &&
             python -u /app/limdius.py"

  playwright-chrome:
    image: dgtlmoon/sockpuppetbrowser:latest
    container_name: playwright-chrome
    restart: unless-stopped
    labels:
      tsdproxy.enable: "false"
    environment:
      - SCREEN_WIDTH=1920
      - SCREEN_HEIGHT=1080
      - SCREEN_DEPTH=16
      - MAX_CONCURRENT_CHROME_PROCESSES=10
    networks:
      - utility-network
    deploy:
      resources:
        limits:
          memory: 1G
          cpus: '1.0'

  # ============================================
  # MONITORING
  # ============================================

  # LOCKED tsdproxy.name: "logs" - DO NOT CHANGE
  # LOCKED PORT: 8182:8080 - DO NOT CHANGE
  dozzle:
    image: amir20/dozzle:latest
    container_name: dozzle
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "logs"
      tsdproxy.container_port: "8080"
      tsdproxy.dash.icon: "sh/dozzle"
    environment:
      - TZ=${TIMEZONE}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    ports:
      - "8182:8080"
    networks:
      - utility-network

  # LOCKED tsdproxy.name: "beszel" - DO NOT CHANGE
  # LOCKED PORT: 8090:8090 - DO NOT CHANGE
  beszel:
    image: henrygd/beszel:latest
    container_name: beszel
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "beszel"
      tsdproxy.container_port: "8090"
      tsdproxy.dash.icon: "sh/beszel"
    volumes:
      - /docker/beszel/data:/beszel_data
    ports:
      - "8090:8090"
    networks:
      - utility-network

  beszel-agent:
    image: henrygd/beszel-agent:latest
    container_name: beszel-agent
    restart: unless-stopped
    network_mode: host
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      - LISTEN=45876
      - KEY=${BESZEL_KEY}

  # LOCKED tsdproxy.name: "cadvisor" - DO NOT CHANGE
  # LOCKED PORT: 9099:8080 - DO NOT CHANGE
  cadvisor:
    image: gcr.io/cadvisor/cadvisor:latest
    container_name: cadvisor
    restart: unless-stopped
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "cadvisor"
      tsdproxy.container_port: "8080"
      tsdproxy.dash.icon: "sh/cadvisor"
    volumes:
      - /:/rootfs:ro
      - /var/run:/var/run:ro
      - /sys:/sys:ro
      - /var/lib/docker/:/var/lib/docker:ro
      - /dev/disk/:/dev/disk:ro
    ports:
      - "9099:8080"
    networks:
      - utility-network

  netalertx:
    image: jokobsk/netalertx:latest
    container_name: netalertx
    restart: unless-stopped
    network_mode: host
    labels:
      tsdproxy.enable: "true"
      tsdproxy.name: "netalertx"
      tsdproxy.container_port: "20211"
    environment:
      - TZ=${TIMEZONE}
      - PORT=20211
    volumes:
      - /docker/netalertx/config:/app/config
      - /docker/netalertx/db:/app/db
      - /docker/netalertx/logs:/app/log
      - type: tmpfs
        target: /app/api
    cap_add:
      - NET_ADMIN
      - NET_RAW
      - NET_BIND_SERVICE

  # ============================================
  # SECURITY & UPDATES
  # ============================================

  # Diun - Docker Image Update Notifier
  # Monitors for new container images and sends notifications
  # v85: Updated to match bender's configuration
  diun:
    image: crazymax/diun:latest
    container_name: diun
    restart: unless-stopped
    labels:
      tsdproxy.enable: "false"
    environment:
      - TZ=${TIMEZONE}
      - LOG_LEVEL=info
      - LOG_JSON=false
      - DIUN_WATCH_WORKERS=20
      - DIUN_WATCH_SCHEDULE=0 30 4 * * 3
      - DIUN_WATCH_JITTER=30s
      - DIUN_WATCH_FIRSTCHECKNOTIF=false
      - DIUN_PROVIDERS_DOCKER=true
      - DIUN_PROVIDERS_DOCKER_WATCHBYDEFAULT=true
      - DIUN_PROVIDERS_DOCKER_WATCHSTOPPED=false
      # ntfy notifications - use container name since both are on utility-network
      - DIUN_NOTIF_NTFY_ENDPOINT=http://ntfy:80
      - DIUN_NOTIF_NTFY_TOPIC=${DIUN_NTFY_TOPIC}
      - DIUN_NOTIF_NTFY_PRIORITY=3
      - DIUN_NOTIF_NTFY_TIMEOUT=10s
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - /docker/diun/data:/data
      - /docker/diun/config:/config
    networks:
      - utility-network

  # Trivy - Vulnerability Scanner
  # Scans container images for CVEs before deployment
  # v85: Changed port from 4954 to 8083 (amy uses 8083, bender uses 8082)
  #      Note: 8082 is used by filebrowser on amy
  # LOCKED PORT: 8083:8080 - DO NOT CHANGE
  trivy:
    image: aquasec/trivy:latest
    container_name: trivy
    restart: unless-stopped
    labels:
      tsdproxy.enable: "false"
    command: ["server", "--listen", "0.0.0.0:8080"]
    environment:
      - TRIVY_CACHE_DIR=/cache
    volumes:
      - /docker/trivy/cache:/cache
      - /var/run/docker.sock:/var/run/docker.sock:ro
    ports:
      - "8083:8080"
    networks:
      - utility-network
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:8080/healthz"]
      interval: 30s
      timeout: 10s
      retries: 3

  # ============================================
  # WATCHTOWER - Commented out (EOL)
  # ============================================
  # !! DO NOT REMOVE - Kept as fallback for emergencies !!
  # Replaced by Diun + Trivy + secure-container-update.sh
  # watchtower:
  #   image: containrrr/watchtower:latest
  #   container_name: watchtower
  #   restart: unless-stopped
  #   network_mode: host
  #   labels:
  #     tsdproxy.enable: "false"
  #   environment:
  #     - TZ=${TIMEZONE}
  #     - WATCHTOWER_CLEANUP=true
  #     - WATCHTOWER_INCLUDE_STOPPED=false
  #     - WATCHTOWER_SCHEDULE=0 0 4 * * *
  #     - WATCHTOWER_NOTIFICATIONS=shoutrrr
  #     - WATCHTOWER_NOTIFICATION_URL=${WATCHTOWER_NOTIFICATION_URL}
  #   volumes:
  #     - /var/run/docker.sock:/var/run/docker.sock

# ============================================
# NETWORKS
# ============================================
networks:
  utility-network:
    driver: bridge
